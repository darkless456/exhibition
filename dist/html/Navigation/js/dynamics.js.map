{"version":3,"sources":["dynamics.js"],"names":["Color","DecomposedMatrix","DecomposedMatrix2D","InterpolableArray","InterpolableColor","InterpolableObject","InterpolableWithUnit","Matrix","Matrix2D","Set","Vector","addTimeout","animationTick","animations","animationsTimeouts","applyDefaults","applyFrame","applyProperties","baseSVG","cacheFn","cancelTimeout","clone","createInterpolable","defaultValueForKey","degProperties","dynamics","getCurrentProperties","interpolate","isDocumentVisible","isSVGElement","lastTime","leftDelayForTimeout","makeArrayFn","observeVisibilityChange","parseProperties","prefixFor","propertyWithPrefix","pxProperties","rAF","roundf","runLoopPaused","runLoopRunning","runLoopTick","setRealTimeout","slow","slowRatio","startAnimation","startRunLoop","svgProperties","timeBeforeVisibilityChange","timeoutLastId","timeouts","toDashed","transformProperties","transformValueForProperty","unitForProperty","__bind","fn","me","apply","arguments","document","visibilityState","tests","fns","addEventListener","_i","_len","_results","length","push","o","k","newO","v","func","data","key","result","toString","this","el","args","i","res","Array","NodeList","HTMLCollection","_ref","prototype","slice","call","splice","options","defaults","properties","style","format","isSVG","matrix","transforms","contains","setAttribute","decompose","map","transform","join","_ref1","SVGElement","SVGSVGElement","decimal","d","Math","pow","round","array","obj","str","replace","$1","toLowerCase","split","match","unit","parseFloat","axis","parsed","property","value","keys","_j","_len1","window","getComputedStyle","baseVal","consolidate","fromTransform","getAttribute","interpolable","klass","klasses","create","endInterpolable","t","end","newObj","start","Object","prefix","suffix","values","sep","newValues","min","val","createFromArray","arr","filter","seps","rgb","toRgba","toRgb","toHex","fromHex","hex","hex3","r","parseInt","g","b","a","fromRgb","componentToHex","c","color","max","props","applyRotateCenter","endMatrix","newProps","_k","_l","_ref2","translate","rotate","skew","scale","rotateC","m","m2d","negativeTranslate","createSVGMatrix","createElementNS","kx","ky","kz","r0","r1","dot","normalize","combine","e","f","atan2","PI","rotateCX","rotateCY","hash","skewX","skewY","els","cross","vector","V","n","product","A","B","sqrt","newElements","ascl","bscl","toMatrix","decomposedB","only","angle","decomposed","decomposedA","invscale","invth","qa","qb","th","indexOf","quaternion","acos","sin","piDouble","decomposedMatrix","j","temp","w","x","y","z","I","perspective","multiply","inverse","augment","toRightTriangular","transpose","dup","M","cols","elements","ki","kj","nc","ni","nj","returnVector","sum","modulus","col","rows","kp","multiplier","np","p","T","divisor","inverse_elements","new_element","inversePerspectiveMatrix","pdum3","perspectiveMatrix","rightHandSide","row","rowElement","s","transposedInversePerspectiveMatrix","type","typeKey","_m","_n","_o","_p","_q","_r","index","elementIndex","asin","cos","isNaN","matrixForTransform","matrixEl","createElement","position","visibility","body","appendChild","removeChild","digits","matrixElements","prop","propArray","propertyName","substring","toUpperCase","requestAnimationFrame","keyCode","shiftKey","ctrlKey","toggleSlow","callback","currTime","id","timeToCall","Date","now","setTimeout","animation","toRemoveAnimations","tt","_base","_base1","tStart","duration","curve","initialForce","change","complete","timeoutId","endProperties","startProperties","timeout","stop","animated","css","realTimeoutId","delay","originalDelay","clearTimeout","time","consumedDelay","visible","difference","_len2","linear","spring","A1","A2","decal","frequency","friction","callee","anticipationSize","x0","x1","anticipationStrength","At","frictionT","y0","yS","bounce","gravity","L","bounciness","curves","elasticity","getPointInCurve","H","t2","L2","forceWithGravity","bezier","Bezier","Bezier_","yForX","p0","p1","p2","p3","xTarget","Bs","returnsToSelf","aB","lower","percent","upper","xTolerance","abs","points","_fn","pointA","pointB","B2","cp","easeInOut","easeIn","easeOut","animate","console","log","module","exports","define"],"mappings":"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","file":"dynamics.js","sourcesContent":["// Generated by CoffeeScript 1.7.1\n(function() {\n  var Color, DecomposedMatrix, DecomposedMatrix2D, InterpolableArray, InterpolableColor, InterpolableObject, InterpolableWithUnit, Matrix, Matrix2D, Set, Vector, addTimeout, animationTick, animations, animationsTimeouts, applyDefaults, applyFrame, applyProperties, baseSVG, cacheFn, cancelTimeout, clone, createInterpolable, defaultValueForKey, degProperties, dynamics, getCurrentProperties, interpolate, isDocumentVisible, isSVGElement, lastTime, leftDelayForTimeout, makeArrayFn, observeVisibilityChange, parseProperties, prefixFor, propertyWithPrefix, pxProperties, rAF, roundf, runLoopPaused, runLoopRunning, runLoopTick, setRealTimeout, slow, slowRatio, startAnimation, startRunLoop, svgProperties, timeBeforeVisibilityChange, timeoutLastId, timeouts, toDashed, transformProperties, transformValueForProperty, unitForProperty,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  isDocumentVisible = function() {\n    return document.visibilityState === \"visible\" || (dynamics.tests != null);\n  };\n\n  observeVisibilityChange = (function() {\n    var fns;\n    fns = [];\n    if (typeof document !== \"undefined\" && document !== null) {\n      document.addEventListener(\"visibilitychange\", function() {\n        var fn, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = fns.length; _i < _len; _i++) {\n          fn = fns[_i];\n          _results.push(fn(isDocumentVisible()));\n        }\n        return _results;\n      });\n    }\n    return function(fn) {\n      return fns.push(fn);\n    };\n  })();\n\n  clone = function(o) {\n    var k, newO, v;\n    newO = {};\n    for (k in o) {\n      v = o[k];\n      newO[k] = v;\n    }\n    return newO;\n  };\n\n  cacheFn = function(func) {\n    var data;\n    data = {};\n    return function() {\n      var k, key, result, _i, _len;\n      key = \"\";\n      for (_i = 0, _len = arguments.length; _i < _len; _i++) {\n        k = arguments[_i];\n        key += k.toString() + \",\";\n      }\n      result = data[key];\n      if (!result) {\n        data[key] = result = func.apply(this, arguments);\n      }\n      return result;\n    };\n  };\n\n  makeArrayFn = function(fn) {\n    return function(el) {\n      var args, i, res;\n      if (el instanceof Array || el instanceof NodeList || el instanceof HTMLCollection) {\n        res = (function() {\n          var _i, _ref, _results;\n          _results = [];\n          for (i = _i = 0, _ref = el.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            args = Array.prototype.slice.call(arguments, 1);\n            args.splice(0, 0, el[i]);\n            _results.push(fn.apply(this, args));\n          }\n          return _results;\n        }).apply(this, arguments);\n        return res;\n      }\n      return fn.apply(this, arguments);\n    };\n  };\n\n  applyDefaults = function(options, defaults) {\n    var k, v, _results;\n    _results = [];\n    for (k in defaults) {\n      v = defaults[k];\n      _results.push(options[k] != null ? options[k] : options[k] = v);\n    }\n    return _results;\n  };\n\n  applyFrame = function(el, properties) {\n    var k, v, _results;\n    if ((el.style != null)) {\n      return applyProperties(el, properties);\n    } else {\n      _results = [];\n      for (k in properties) {\n        v = properties[k];\n        _results.push(el[k] = v.format());\n      }\n      return _results;\n    }\n  };\n\n  applyProperties = function(el, properties) {\n    var isSVG, k, matrix, transforms, v;\n    properties = parseProperties(properties);\n    transforms = [];\n    isSVG = isSVGElement(el);\n    for (k in properties) {\n      v = properties[k];\n      if (transformProperties.contains(k)) {\n        transforms.push([k, v]);\n      } else {\n        if (v.format != null) {\n          v = v.format();\n        } else {\n          v = \"\" + v + (unitForProperty(k, v));\n        }\n        if (isSVG && svgProperties.contains(k)) {\n          el.setAttribute(k, v);\n        } else {\n          el.style[propertyWithPrefix(k)] = v;\n        }\n      }\n    }\n    if (transforms.length > 0) {\n      if (isSVG) {\n        matrix = new Matrix2D();\n        matrix.applyProperties(transforms);\n        return el.setAttribute(\"transform\", matrix.decompose().format());\n      } else {\n        v = (transforms.map(function(transform) {\n          return transformValueForProperty(transform[0], transform[1]);\n        })).join(\" \");\n        return el.style[propertyWithPrefix(\"transform\")] = v;\n      }\n    }\n  };\n\n  isSVGElement = function(el) {\n    var _ref, _ref1;\n    if ((typeof SVGElement !== \"undefined\" && SVGElement !== null) && (typeof SVGSVGElement !== \"undefined\" && SVGSVGElement !== null)) {\n      return el instanceof SVGElement && !(el instanceof SVGSVGElement);\n    } else {\n      return (_ref = (_ref1 = dynamics.tests) != null ? typeof _ref1.isSVG === \"function\" ? _ref1.isSVG(el) : void 0 : void 0) != null ? _ref : false;\n    }\n  };\n\n  roundf = function(v, decimal) {\n    var d;\n    d = Math.pow(10, decimal);\n    return Math.round(v * d) / d;\n  };\n\n  Set = (function() {\n    function Set(array) {\n      var v, _i, _len;\n      this.obj = {};\n      for (_i = 0, _len = array.length; _i < _len; _i++) {\n        v = array[_i];\n        this.obj[v] = 1;\n      }\n    }\n\n    Set.prototype.contains = function(v) {\n      return this.obj[v] === 1;\n    };\n\n    return Set;\n\n  })();\n\n  toDashed = function(str) {\n    return str.replace(/([A-Z])/g, function($1) {\n      return \"-\" + $1.toLowerCase();\n    });\n  };\n\n  pxProperties = new Set('marginTop,marginLeft,marginBottom,marginRight,paddingTop,paddingLeft,paddingBottom,paddingRight,top,left,bottom,right,translateX,translateY,translateZ,perspectiveX,perspectiveY,perspectiveZ,width,height,maxWidth,maxHeight,minWidth,minHeight,borderRadius'.split(','));\n\n  degProperties = new Set('rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ'.split(','));\n\n  transformProperties = new Set('translate,translateX,translateY,translateZ,scale,scaleX,scaleY,scaleZ,rotate,rotateX,rotateY,rotateZ,rotateC,rotateCX,rotateCY,skew,skewX,skewY,skewZ,perspective'.split(','));\n\n  svgProperties = new Set('accent-height,ascent,azimuth,baseFrequency,baseline-shift,bias,cx,cy,d,diffuseConstant,divisor,dx,dy,elevation,filterRes,fx,fy,gradientTransform,height,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,letter-spacing,limitingConeAngle,markerHeight,markerWidth,numOctaves,order,overline-position,overline-thickness,pathLength,points,pointsAtX,pointsAtY,pointsAtZ,r,radius,rx,ry,seed,specularConstant,specularExponent,stdDeviation,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,surfaceScale,target,targetX,targetY,transform,underline-position,underline-thickness,viewBox,width,x,x1,x2,y,y1,y2,z'.split(','));\n\n  unitForProperty = function(k, v) {\n    if (typeof v !== 'number') {\n      return '';\n    }\n    if (pxProperties.contains(k)) {\n      return 'px';\n    } else if (degProperties.contains(k)) {\n      return 'deg';\n    }\n    return '';\n  };\n\n  transformValueForProperty = function(k, v) {\n    var match, unit;\n    match = (\"\" + v).match(/^([0-9.-]*)([^0-9]*)$/);\n    if (match != null) {\n      v = match[1];\n      unit = match[2];\n    } else {\n      v = parseFloat(v);\n    }\n    v = roundf(parseFloat(v), 10);\n    if ((unit == null) || unit === \"\") {\n      unit = unitForProperty(k, v);\n    }\n    return \"\" + k + \"(\" + v + unit + \")\";\n  };\n\n  parseProperties = function(properties) {\n    var axis, match, parsed, property, value, _i, _len, _ref;\n    parsed = {};\n    for (property in properties) {\n      value = properties[property];\n      if (transformProperties.contains(property)) {\n        match = property.match(/(translate|rotateC|rotate|skew|scale|perspective)(X|Y|Z|)/);\n        if (match && match[2].length > 0) {\n          parsed[property] = value;\n        } else {\n          _ref = ['X', 'Y', 'Z'];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            axis = _ref[_i];\n            parsed[match[1] + axis] = value;\n          }\n        }\n      } else {\n        parsed[property] = value;\n      }\n    }\n    return parsed;\n  };\n\n  defaultValueForKey = function(key) {\n    var v;\n    v = key === 'opacity' ? 1 : 0;\n    return \"\" + v + (unitForProperty(key, v));\n  };\n\n  getCurrentProperties = function(el, keys) {\n    var isSVG, key, matrix, properties, style, v, _i, _j, _len, _len1, _ref;\n    properties = {};\n    isSVG = isSVGElement(el);\n    if (el.style != null) {\n      style = window.getComputedStyle(el, null);\n      for (_i = 0, _len = keys.length; _i < _len; _i++) {\n        key = keys[_i];\n        if (transformProperties.contains(key)) {\n          if (properties['transform'] == null) {\n            if (isSVG) {\n              matrix = new Matrix2D((_ref = el.transform.baseVal.consolidate()) != null ? _ref.matrix : void 0);\n            } else {\n              matrix = Matrix.fromTransform(style[propertyWithPrefix('transform')]);\n            }\n            properties['transform'] = matrix.decompose();\n          }\n        } else {\n          v = style[key];\n          if ((v == null) && svgProperties.contains(key)) {\n            v = el.getAttribute(key);\n          }\n          if (v === \"\" || (v == null)) {\n            v = defaultValueForKey(key);\n          }\n          properties[key] = createInterpolable(v);\n        }\n      }\n    } else {\n      for (_j = 0, _len1 = keys.length; _j < _len1; _j++) {\n        key = keys[_j];\n        properties[key] = createInterpolable(el[key]);\n      }\n    }\n    return properties;\n  };\n\n  createInterpolable = function(value) {\n    var interpolable, klass, klasses, _i, _len;\n    klasses = [InterpolableColor, InterpolableArray, InterpolableObject, InterpolableWithUnit];\n    for (_i = 0, _len = klasses.length; _i < _len; _i++) {\n      klass = klasses[_i];\n      interpolable = klass.create(value);\n      if (interpolable != null) {\n        return interpolable;\n      }\n    }\n    return null;\n  };\n\n  InterpolableObject = (function() {\n    function InterpolableObject(obj) {\n      this.format = __bind(this.format, this);\n      this.interpolate = __bind(this.interpolate, this);\n      this.obj = obj;\n    }\n\n    InterpolableObject.prototype.interpolate = function(endInterpolable, t) {\n      var end, k, newObj, start, v;\n      start = this.obj;\n      end = endInterpolable.obj;\n      newObj = {};\n      for (k in start) {\n        v = start[k];\n        if (v.interpolate != null) {\n          newObj[k] = v.interpolate(end[k], t);\n        } else {\n          newObj[k] = v;\n        }\n      }\n      return new InterpolableObject(newObj);\n    };\n\n    InterpolableObject.prototype.format = function() {\n      return this.obj;\n    };\n\n    InterpolableObject.create = function(value) {\n      var k, obj, v;\n      if (value instanceof Object) {\n        obj = {};\n        for (k in value) {\n          v = value[k];\n          obj[k] = createInterpolable(v);\n        }\n        return new InterpolableObject(obj);\n      }\n      return null;\n    };\n\n    return InterpolableObject;\n\n  })();\n\n  InterpolableWithUnit = (function() {\n    function InterpolableWithUnit(value, prefix, suffix) {\n      this.prefix = prefix;\n      this.suffix = suffix;\n      this.format = __bind(this.format, this);\n      this.interpolate = __bind(this.interpolate, this);\n      this.value = parseFloat(value);\n    }\n\n    InterpolableWithUnit.prototype.interpolate = function(endInterpolable, t) {\n      var end, start;\n      start = this.value;\n      end = endInterpolable.value;\n      return new InterpolableWithUnit((end - start) * t + start, endInterpolable.prefix || this.prefix, endInterpolable.suffix || this.suffix);\n    };\n\n    InterpolableWithUnit.prototype.format = function() {\n      if ((this.prefix == null) && (this.suffix == null)) {\n        return roundf(this.value, 5);\n      }\n      return this.prefix + roundf(this.value, 5) + this.suffix;\n    };\n\n    InterpolableWithUnit.create = function(value) {\n      var match;\n      if (typeof value !== \"string\") {\n        return new InterpolableWithUnit(value);\n      }\n      match = (\"\" + value).match(\"([^0-9.+-]*)([0-9.+-]+)([^0-9.+-]*)\");\n      if (match != null) {\n        return new InterpolableWithUnit(match[2], match[1], match[3]);\n      }\n      return null;\n    };\n\n    return InterpolableWithUnit;\n\n  })();\n\n  InterpolableArray = (function() {\n    function InterpolableArray(values, sep) {\n      this.values = values;\n      this.sep = sep;\n      this.format = __bind(this.format, this);\n      this.interpolate = __bind(this.interpolate, this);\n    }\n\n    InterpolableArray.prototype.interpolate = function(endInterpolable, t) {\n      var end, i, newValues, start, _i, _ref;\n      start = this.values;\n      end = endInterpolable.values;\n      newValues = [];\n      for (i = _i = 0, _ref = Math.min(start.length, end.length); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        if (start[i].interpolate != null) {\n          newValues.push(start[i].interpolate(end[i], t));\n        } else {\n          newValues.push(start[i]);\n        }\n      }\n      return new InterpolableArray(newValues, this.sep);\n    };\n\n    InterpolableArray.prototype.format = function() {\n      var values;\n      values = this.values.map(function(val) {\n        if (val.format != null) {\n          return val.format();\n        } else {\n          return val;\n        }\n      });\n      if (this.sep != null) {\n        return values.join(this.sep);\n      } else {\n        return values;\n      }\n    };\n\n    InterpolableArray.createFromArray = function(arr, sep) {\n      var values;\n      values = arr.map(function(val) {\n        return createInterpolable(val) || val;\n      });\n      values = values.filter(function(val) {\n        return val != null;\n      });\n      return new InterpolableArray(values, sep);\n    };\n\n    InterpolableArray.create = function(value) {\n      var arr, sep, seps, _i, _len;\n      if (value instanceof Array) {\n        return InterpolableArray.createFromArray(value, null);\n      }\n      if (typeof value !== \"string\") {\n        return;\n      }\n      seps = [' ', ',', '|', ';', '/', ':'];\n      for (_i = 0, _len = seps.length; _i < _len; _i++) {\n        sep = seps[_i];\n        arr = value.split(sep);\n        if (arr.length > 1) {\n          return InterpolableArray.createFromArray(arr, sep);\n        }\n      }\n      return null;\n    };\n\n    return InterpolableArray;\n\n  })();\n\n  Color = (function() {\n    function Color(rgb, format) {\n      this.rgb = rgb != null ? rgb : {};\n      this.format = format;\n      this.toRgba = __bind(this.toRgba, this);\n      this.toRgb = __bind(this.toRgb, this);\n      this.toHex = __bind(this.toHex, this);\n    }\n\n    Color.fromHex = function(hex) {\n      var hex3, result;\n      hex3 = hex.match(/^#([a-f\\d]{1})([a-f\\d]{1})([a-f\\d]{1})$/i);\n      if (hex3 != null) {\n        hex = \"#\" + hex3[1] + hex3[1] + hex3[2] + hex3[2] + hex3[3] + hex3[3];\n      }\n      result = hex.match(/^#([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i);\n      if (result != null) {\n        return new Color({\n          r: parseInt(result[1], 16),\n          g: parseInt(result[2], 16),\n          b: parseInt(result[3], 16),\n          a: 1\n        }, \"hex\");\n      }\n      return null;\n    };\n\n    Color.fromRgb = function(rgb) {\n      var match, _ref;\n      match = rgb.match(/^rgba?\\(([0-9.]*), ?([0-9.]*), ?([0-9.]*)(?:, ?([0-9.]*))?\\)$/);\n      if (match != null) {\n        return new Color({\n          r: parseFloat(match[1]),\n          g: parseFloat(match[2]),\n          b: parseFloat(match[3]),\n          a: parseFloat((_ref = match[4]) != null ? _ref : 1)\n        }, match[4] != null ? \"rgba\" : \"rgb\");\n      }\n      return null;\n    };\n\n    Color.componentToHex = function(c) {\n      var hex;\n      hex = c.toString(16);\n      if (hex.length === 1) {\n        return \"0\" + hex;\n      } else {\n        return hex;\n      }\n    };\n\n    Color.prototype.toHex = function() {\n      return \"#\" + Color.componentToHex(this.rgb.r) + Color.componentToHex(this.rgb.g) + Color.componentToHex(this.rgb.b);\n    };\n\n    Color.prototype.toRgb = function() {\n      return \"rgb(\" + this.rgb.r + \", \" + this.rgb.g + \", \" + this.rgb.b + \")\";\n    };\n\n    Color.prototype.toRgba = function() {\n      return \"rgba(\" + this.rgb.r + \", \" + this.rgb.g + \", \" + this.rgb.b + \", \" + this.rgb.a + \")\";\n    };\n\n    return Color;\n\n  })();\n\n  InterpolableColor = (function() {\n    function InterpolableColor(color) {\n      this.color = color;\n      this.format = __bind(this.format, this);\n      this.interpolate = __bind(this.interpolate, this);\n    }\n\n    InterpolableColor.prototype.interpolate = function(endInterpolable, t) {\n      var end, k, rgb, start, v, _i, _len, _ref;\n      start = this.color;\n      end = endInterpolable.color;\n      rgb = {};\n      _ref = ['r', 'g', 'b'];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        k = _ref[_i];\n        v = Math.round((end.rgb[k] - start.rgb[k]) * t + start.rgb[k]);\n        rgb[k] = Math.min(255, Math.max(0, v));\n      }\n      k = \"a\";\n      v = roundf((end.rgb[k] - start.rgb[k]) * t + start.rgb[k], 5);\n      rgb[k] = Math.min(1, Math.max(0, v));\n      return new InterpolableColor(new Color(rgb, end.format));\n    };\n\n    InterpolableColor.prototype.format = function() {\n      if (this.color.format === \"hex\") {\n        return this.color.toHex();\n      } else if (this.color.format === \"rgb\") {\n        return this.color.toRgb();\n      } else if (this.color.format === \"rgba\") {\n        return this.color.toRgba();\n      }\n    };\n\n    InterpolableColor.create = function(value) {\n      var color;\n      if (typeof value !== \"string\") {\n        return;\n      }\n      color = Color.fromHex(value) || Color.fromRgb(value);\n      if (color != null) {\n        return new InterpolableColor(color);\n      }\n      return null;\n    };\n\n    return InterpolableColor;\n\n  })();\n\n  DecomposedMatrix2D = (function() {\n    function DecomposedMatrix2D(props) {\n      this.props = props;\n      this.applyRotateCenter = __bind(this.applyRotateCenter, this);\n      this.format = __bind(this.format, this);\n      this.interpolate = __bind(this.interpolate, this);\n    }\n\n    DecomposedMatrix2D.prototype.interpolate = function(endMatrix, t) {\n      var i, k, newProps, _i, _j, _k, _l, _len, _len1, _ref, _ref1, _ref2;\n      newProps = {};\n      _ref = ['translate', 'scale', 'rotate'];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        k = _ref[_i];\n        newProps[k] = [];\n        for (i = _j = 0, _ref1 = this.props[k].length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n          newProps[k][i] = (endMatrix.props[k][i] - this.props[k][i]) * t + this.props[k][i];\n        }\n      }\n      for (i = _k = 1; _k <= 2; i = ++_k) {\n        newProps['rotate'][i] = endMatrix.props['rotate'][i];\n      }\n      _ref2 = ['skew'];\n      for (_l = 0, _len1 = _ref2.length; _l < _len1; _l++) {\n        k = _ref2[_l];\n        newProps[k] = (endMatrix.props[k] - this.props[k]) * t + this.props[k];\n      }\n      return new DecomposedMatrix2D(newProps);\n    };\n\n    DecomposedMatrix2D.prototype.format = function() {\n      return \"translate(\" + (this.props.translate.join(',')) + \") rotate(\" + (this.props.rotate.join(',')) + \") skewX(\" + this.props.skew + \") scale(\" + (this.props.scale.join(',')) + \")\";\n    };\n\n    DecomposedMatrix2D.prototype.applyRotateCenter = function(rotateC) {\n      var i, m, m2d, negativeTranslate, _i, _results;\n      m = baseSVG.createSVGMatrix();\n      m = m.translate(rotateC[0], rotateC[1]);\n      m = m.rotate(this.props.rotate[0]);\n      m = m.translate(-rotateC[0], -rotateC[1]);\n      m2d = new Matrix2D(m);\n      negativeTranslate = m2d.decompose().props.translate;\n      _results = [];\n      for (i = _i = 0; _i <= 1; i = ++_i) {\n        _results.push(this.props.translate[i] -= negativeTranslate[i]);\n      }\n      return _results;\n    };\n\n    return DecomposedMatrix2D;\n\n  })();\n\n  baseSVG = typeof document !== \"undefined\" && document !== null ? document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\") : void 0;\n\n  Matrix2D = (function() {\n    function Matrix2D(m) {\n      this.m = m;\n      this.applyProperties = __bind(this.applyProperties, this);\n      this.decompose = __bind(this.decompose, this);\n      if (!this.m) {\n        this.m = baseSVG.createSVGMatrix();\n      }\n    }\n\n    Matrix2D.prototype.decompose = function() {\n      var kx, ky, kz, r0, r1;\n      r0 = new Vector([this.m.a, this.m.b]);\n      r1 = new Vector([this.m.c, this.m.d]);\n      kx = r0.length();\n      kz = r0.dot(r1);\n      r0 = r0.normalize();\n      ky = r1.combine(r0, 1, -kz).length();\n      return new DecomposedMatrix2D({\n        translate: [this.m.e, this.m.f],\n        rotate: [Math.atan2(this.m.b, this.m.a) * 180 / Math.PI, this.rotateCX, this.rotateCY],\n        scale: [kx, ky],\n        skew: kz / ky * 180 / Math.PI\n      });\n    };\n\n    Matrix2D.prototype.applyProperties = function(properties) {\n      var hash, k, props, v, _i, _len, _ref, _ref1;\n      hash = {};\n      for (_i = 0, _len = properties.length; _i < _len; _i++) {\n        props = properties[_i];\n        hash[props[0]] = props[1];\n      }\n      for (k in hash) {\n        v = hash[k];\n        if (k === \"translateX\") {\n          this.m = this.m.translate(v, 0);\n        } else if (k === \"translateY\") {\n          this.m = this.m.translate(0, v);\n        } else if (k === \"scaleX\") {\n          this.m = this.m.scale(v, 1);\n        } else if (k === \"scaleY\") {\n          this.m = this.m.scale(1, v);\n        } else if (k === \"rotateZ\") {\n          this.m = this.m.rotate(v);\n        } else if (k === \"skewX\") {\n          this.m = this.m.skewX(v);\n        } else if (k === \"skewY\") {\n          this.m = this.m.skewY(v);\n        }\n      }\n      this.rotateCX = (_ref = hash.rotateCX) != null ? _ref : 0;\n      return this.rotateCY = (_ref1 = hash.rotateCY) != null ? _ref1 : 0;\n    };\n\n    return Matrix2D;\n\n  })();\n\n  Vector = (function() {\n    function Vector(els) {\n      this.els = els;\n      this.combine = __bind(this.combine, this);\n      this.normalize = __bind(this.normalize, this);\n      this.length = __bind(this.length, this);\n      this.cross = __bind(this.cross, this);\n      this.dot = __bind(this.dot, this);\n      this.e = __bind(this.e, this);\n    }\n\n    Vector.prototype.e = function(i) {\n      if (i < 1 || i > this.els.length) {\n        return null;\n      } else {\n        return this.els[i - 1];\n      }\n    };\n\n    Vector.prototype.dot = function(vector) {\n      var V, n, product;\n      V = vector.els || vector;\n      product = 0;\n      n = this.els.length;\n      if (n !== V.length) {\n        return null;\n      }\n      n += 1;\n      while (--n) {\n        product += this.els[n - 1] * V[n - 1];\n      }\n      return product;\n    };\n\n    Vector.prototype.cross = function(vector) {\n      var A, B;\n      B = vector.els || vector;\n      if (this.els.length !== 3 || B.length !== 3) {\n        return null;\n      }\n      A = this.els;\n      return new Vector([(A[1] * B[2]) - (A[2] * B[1]), (A[2] * B[0]) - (A[0] * B[2]), (A[0] * B[1]) - (A[1] * B[0])]);\n    };\n\n    Vector.prototype.length = function() {\n      var a, e, _i, _len, _ref;\n      a = 0;\n      _ref = this.els;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        e = _ref[_i];\n        a += Math.pow(e, 2);\n      }\n      return Math.sqrt(a);\n    };\n\n    Vector.prototype.normalize = function() {\n      var e, i, length, newElements, _ref;\n      length = this.length();\n      newElements = [];\n      _ref = this.els;\n      for (i in _ref) {\n        e = _ref[i];\n        newElements[i] = e / length;\n      }\n      return new Vector(newElements);\n    };\n\n    Vector.prototype.combine = function(b, ascl, bscl) {\n      var i, result, _i, _ref;\n      result = [];\n      for (i = _i = 0, _ref = this.els.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        result[i] = (ascl * this.els[i]) + (bscl * b.els[i]);\n      }\n      return new Vector(result);\n    };\n\n    return Vector;\n\n  })();\n\n  DecomposedMatrix = (function() {\n    function DecomposedMatrix() {\n      this.toMatrix = __bind(this.toMatrix, this);\n      this.format = __bind(this.format, this);\n      this.interpolate = __bind(this.interpolate, this);\n    }\n\n    DecomposedMatrix.prototype.interpolate = function(decomposedB, t, only) {\n      var angle, decomposed, decomposedA, i, invscale, invth, k, qa, qb, scale, th, _i, _j, _k, _l, _len, _ref, _ref1;\n      if (only == null) {\n        only = null;\n      }\n      decomposedA = this;\n      decomposed = new DecomposedMatrix;\n      _ref = ['translate', 'scale', 'skew', 'perspective'];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        k = _ref[_i];\n        decomposed[k] = [];\n        for (i = _j = 0, _ref1 = decomposedA[k].length - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n          if ((only == null) || only.indexOf(k) > -1 || only.indexOf(\"\" + k + ['x', 'y', 'z'][i]) > -1) {\n            decomposed[k][i] = (decomposedB[k][i] - decomposedA[k][i]) * t + decomposedA[k][i];\n          } else {\n            decomposed[k][i] = decomposedA[k][i];\n          }\n        }\n      }\n      if ((only == null) || only.indexOf('rotate') !== -1) {\n        qa = decomposedA.quaternion;\n        qb = decomposedB.quaternion;\n        angle = qa[0] * qb[0] + qa[1] * qb[1] + qa[2] * qb[2] + qa[3] * qb[3];\n        if (angle < 0.0) {\n          for (i = _k = 0; _k <= 3; i = ++_k) {\n            qa[i] = -qa[i];\n          }\n          angle = -angle;\n        }\n        if (angle + 1.0 > .05) {\n          if (1.0 - angle >= .05) {\n            th = Math.acos(angle);\n            invth = 1.0 / Math.sin(th);\n            scale = Math.sin(th * (1.0 - t)) * invth;\n            invscale = Math.sin(th * t) * invth;\n          } else {\n            scale = 1.0 - t;\n            invscale = t;\n          }\n        } else {\n          qb[0] = -qa[1];\n          qb[1] = qa[0];\n          qb[2] = -qa[3];\n          qb[3] = qa[2];\n          scale = Math.sin(piDouble * (.5 - t));\n          invscale = Math.sin(piDouble * t);\n        }\n        decomposed.quaternion = [];\n        for (i = _l = 0; _l <= 3; i = ++_l) {\n          decomposed.quaternion[i] = qa[i] * scale + qb[i] * invscale;\n        }\n      } else {\n        decomposed.quaternion = decomposedA.quaternion;\n      }\n      return decomposed;\n    };\n\n    DecomposedMatrix.prototype.format = function() {\n      return this.toMatrix().toString();\n    };\n\n    DecomposedMatrix.prototype.toMatrix = function() {\n      var decomposedMatrix, i, j, match, matrix, quaternion, skew, temp, w, x, y, z, _i, _j, _k, _l;\n      decomposedMatrix = this;\n      matrix = Matrix.I(4);\n      for (i = _i = 0; _i <= 3; i = ++_i) {\n        matrix.els[i][3] = decomposedMatrix.perspective[i];\n      }\n      quaternion = decomposedMatrix.quaternion;\n      x = quaternion[0];\n      y = quaternion[1];\n      z = quaternion[2];\n      w = quaternion[3];\n      skew = decomposedMatrix.skew;\n      match = [[1, 0], [2, 0], [2, 1]];\n      for (i = _j = 2; _j >= 0; i = --_j) {\n        if (skew[i]) {\n          temp = Matrix.I(4);\n          temp.els[match[i][0]][match[i][1]] = skew[i];\n          matrix = matrix.multiply(temp);\n        }\n      }\n      matrix = matrix.multiply(new Matrix([[1 - 2 * (y * y + z * z), 2 * (x * y - z * w), 2 * (x * z + y * w), 0], [2 * (x * y + z * w), 1 - 2 * (x * x + z * z), 2 * (y * z - x * w), 0], [2 * (x * z - y * w), 2 * (y * z + x * w), 1 - 2 * (x * x + y * y), 0], [0, 0, 0, 1]]));\n      for (i = _k = 0; _k <= 2; i = ++_k) {\n        for (j = _l = 0; _l <= 2; j = ++_l) {\n          matrix.els[i][j] *= decomposedMatrix.scale[i];\n        }\n        matrix.els[3][i] = decomposedMatrix.translate[i];\n      }\n      return matrix;\n    };\n\n    return DecomposedMatrix;\n\n  })();\n\n  Matrix = (function() {\n    function Matrix(els) {\n      this.els = els;\n      this.toString = __bind(this.toString, this);\n      this.decompose = __bind(this.decompose, this);\n      this.inverse = __bind(this.inverse, this);\n      this.augment = __bind(this.augment, this);\n      this.toRightTriangular = __bind(this.toRightTriangular, this);\n      this.transpose = __bind(this.transpose, this);\n      this.multiply = __bind(this.multiply, this);\n      this.dup = __bind(this.dup, this);\n      this.e = __bind(this.e, this);\n    }\n\n    Matrix.prototype.e = function(i, j) {\n      if (i < 1 || i > this.els.length || j < 1 || j > this.els[0].length) {\n        return null;\n      }\n      return this.els[i - 1][j - 1];\n    };\n\n    Matrix.prototype.dup = function() {\n      return new Matrix(this.els);\n    };\n\n    Matrix.prototype.multiply = function(matrix) {\n      var M, c, cols, elements, i, j, ki, kj, nc, ni, nj, returnVector, sum;\n      returnVector = matrix.modulus ? true : false;\n      M = matrix.els || matrix;\n      if (typeof M[0][0] === 'undefined') {\n        M = new Matrix(M).els;\n      }\n      ni = this.els.length;\n      ki = ni;\n      kj = M[0].length;\n      cols = this.els[0].length;\n      elements = [];\n      ni += 1;\n      while (--ni) {\n        i = ki - ni;\n        elements[i] = [];\n        nj = kj;\n        nj += 1;\n        while (--nj) {\n          j = kj - nj;\n          sum = 0;\n          nc = cols;\n          nc += 1;\n          while (--nc) {\n            c = cols - nc;\n            sum += this.els[i][c] * M[c][j];\n          }\n          elements[i][j] = sum;\n        }\n      }\n      M = new Matrix(elements);\n      if (returnVector) {\n        return M.col(1);\n      } else {\n        return M;\n      }\n    };\n\n    Matrix.prototype.transpose = function() {\n      var cols, elements, i, j, ni, nj, rows;\n      rows = this.els.length;\n      cols = this.els[0].length;\n      elements = [];\n      ni = cols;\n      ni += 1;\n      while (--ni) {\n        i = cols - ni;\n        elements[i] = [];\n        nj = rows;\n        nj += 1;\n        while (--nj) {\n          j = rows - nj;\n          elements[i][j] = this.els[j][i];\n        }\n      }\n      return new Matrix(elements);\n    };\n\n    Matrix.prototype.toRightTriangular = function() {\n      var M, els, i, j, k, kp, multiplier, n, np, p, _i, _j, _ref, _ref1;\n      M = this.dup();\n      n = this.els.length;\n      k = n;\n      kp = this.els[0].length;\n      while (--n) {\n        i = k - n;\n        if (M.els[i][i] === 0) {\n          for (j = _i = _ref = i + 1; _ref <= k ? _i < k : _i > k; j = _ref <= k ? ++_i : --_i) {\n            if (M.els[j][i] !== 0) {\n              els = [];\n              np = kp;\n              np += 1;\n              while (--np) {\n                p = kp - np;\n                els.push(M.els[i][p] + M.els[j][p]);\n              }\n              M.els[i] = els;\n              break;\n            }\n          }\n        }\n        if (M.els[i][i] !== 0) {\n          for (j = _j = _ref1 = i + 1; _ref1 <= k ? _j < k : _j > k; j = _ref1 <= k ? ++_j : --_j) {\n            multiplier = M.els[j][i] / M.els[i][i];\n            els = [];\n            np = kp;\n            np += 1;\n            while (--np) {\n              p = kp - np;\n              els.push(p <= i ? 0 : M.els[j][p] - M.els[i][p] * multiplier);\n            }\n            M.els[j] = els;\n          }\n        }\n      }\n      return M;\n    };\n\n    Matrix.prototype.augment = function(matrix) {\n      var M, T, cols, i, j, ki, kj, ni, nj;\n      M = matrix.els || matrix;\n      if (typeof M[0][0] === 'undefined') {\n        M = new Matrix(M).els;\n      }\n      T = this.dup();\n      cols = T.els[0].length;\n      ni = T.els.length;\n      ki = ni;\n      kj = M[0].length;\n      if (ni !== M.length) {\n        return null;\n      }\n      ni += 1;\n      while (--ni) {\n        i = ki - ni;\n        nj = kj;\n        nj += 1;\n        while (--nj) {\n          j = kj - nj;\n          T.els[i][cols + j] = M[i][j];\n        }\n      }\n      return T;\n    };\n\n    Matrix.prototype.inverse = function() {\n      var M, divisor, els, i, inverse_elements, j, ki, kp, new_element, ni, np, p, _i;\n      ni = this.els.length;\n      ki = ni;\n      M = this.augment(Matrix.I(ni)).toRightTriangular();\n      kp = M.els[0].length;\n      inverse_elements = [];\n      ni += 1;\n      while (--ni) {\n        i = ni - 1;\n        els = [];\n        np = kp;\n        inverse_elements[i] = [];\n        divisor = M.els[i][i];\n        np += 1;\n        while (--np) {\n          p = kp - np;\n          new_element = M.els[i][p] / divisor;\n          els.push(new_element);\n          if (p >= ki) {\n            inverse_elements[i].push(new_element);\n          }\n        }\n        M.els[i] = els;\n        for (j = _i = 0; 0 <= i ? _i < i : _i > i; j = 0 <= i ? ++_i : --_i) {\n          els = [];\n          np = kp;\n          np += 1;\n          while (--np) {\n            p = kp - np;\n            els.push(M.els[j][p] - M.els[i][p] * M.els[j][i]);\n          }\n          M.els[j] = els;\n        }\n      }\n      return new Matrix(inverse_elements);\n    };\n\n    Matrix.I = function(n) {\n      var els, i, j, k, nj;\n      els = [];\n      k = n;\n      n += 1;\n      while (--n) {\n        i = k - n;\n        els[i] = [];\n        nj = k;\n        nj += 1;\n        while (--nj) {\n          j = k - nj;\n          els[i][j] = i === j ? 1 : 0;\n        }\n      }\n      return new Matrix(els);\n    };\n\n    Matrix.prototype.decompose = function() {\n      var els, i, inversePerspectiveMatrix, j, k, matrix, pdum3, perspective, perspectiveMatrix, quaternion, result, rightHandSide, rotate, row, rowElement, s, scale, skew, t, translate, transposedInversePerspectiveMatrix, type, typeKey, v, w, x, y, z, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r;\n      matrix = this;\n      translate = [];\n      scale = [];\n      skew = [];\n      quaternion = [];\n      perspective = [];\n      els = [];\n      for (i = _i = 0; _i <= 3; i = ++_i) {\n        els[i] = [];\n        for (j = _j = 0; _j <= 3; j = ++_j) {\n          els[i][j] = matrix.els[i][j];\n        }\n      }\n      if (els[3][3] === 0) {\n        return false;\n      }\n      for (i = _k = 0; _k <= 3; i = ++_k) {\n        for (j = _l = 0; _l <= 3; j = ++_l) {\n          els[i][j] /= els[3][3];\n        }\n      }\n      perspectiveMatrix = matrix.dup();\n      for (i = _m = 0; _m <= 2; i = ++_m) {\n        perspectiveMatrix.els[i][3] = 0;\n      }\n      perspectiveMatrix.els[3][3] = 1;\n      if (els[0][3] !== 0 || els[1][3] !== 0 || els[2][3] !== 0) {\n        rightHandSide = new Vector(els.slice(0, 4)[3]);\n        inversePerspectiveMatrix = perspectiveMatrix.inverse();\n        transposedInversePerspectiveMatrix = inversePerspectiveMatrix.transpose();\n        perspective = transposedInversePerspectiveMatrix.multiply(rightHandSide).els;\n        for (i = _n = 0; _n <= 2; i = ++_n) {\n          els[i][3] = 0;\n        }\n        els[3][3] = 1;\n      } else {\n        perspective = [0, 0, 0, 1];\n      }\n      for (i = _o = 0; _o <= 2; i = ++_o) {\n        translate[i] = els[3][i];\n        els[3][i] = 0;\n      }\n      row = [];\n      for (i = _p = 0; _p <= 2; i = ++_p) {\n        row[i] = new Vector(els[i].slice(0, 3));\n      }\n      scale[0] = row[0].length();\n      row[0] = row[0].normalize();\n      skew[0] = row[0].dot(row[1]);\n      row[1] = row[1].combine(row[0], 1.0, -skew[0]);\n      scale[1] = row[1].length();\n      row[1] = row[1].normalize();\n      skew[0] /= scale[1];\n      skew[1] = row[0].dot(row[2]);\n      row[2] = row[2].combine(row[0], 1.0, -skew[1]);\n      skew[2] = row[1].dot(row[2]);\n      row[2] = row[2].combine(row[1], 1.0, -skew[2]);\n      scale[2] = row[2].length();\n      row[2] = row[2].normalize();\n      skew[1] /= scale[2];\n      skew[2] /= scale[2];\n      pdum3 = row[1].cross(row[2]);\n      if (row[0].dot(pdum3) < 0) {\n        for (i = _q = 0; _q <= 2; i = ++_q) {\n          scale[i] *= -1;\n          for (j = _r = 0; _r <= 2; j = ++_r) {\n            row[i].els[j] *= -1;\n          }\n        }\n      }\n      rowElement = function(index, elementIndex) {\n        return row[index].els[elementIndex];\n      };\n      rotate = [];\n      rotate[1] = Math.asin(-rowElement(0, 2));\n      if (Math.cos(rotate[1]) !== 0) {\n        rotate[0] = Math.atan2(rowElement(1, 2), rowElement(2, 2));\n        rotate[2] = Math.atan2(rowElement(0, 1), rowElement(0, 0));\n      } else {\n        rotate[0] = Math.atan2(-rowElement(2, 0), rowElement(1, 1));\n        rotate[1] = 0;\n      }\n      t = rowElement(0, 0) + rowElement(1, 1) + rowElement(2, 2) + 1.0;\n      if (t > 1e-4) {\n        s = 0.5 / Math.sqrt(t);\n        w = 0.25 / s;\n        x = (rowElement(2, 1) - rowElement(1, 2)) * s;\n        y = (rowElement(0, 2) - rowElement(2, 0)) * s;\n        z = (rowElement(1, 0) - rowElement(0, 1)) * s;\n      } else if ((rowElement(0, 0) > rowElement(1, 1)) && (rowElement(0, 0) > rowElement(2, 2))) {\n        s = Math.sqrt(1.0 + rowElement(0, 0) - rowElement(1, 1) - rowElement(2, 2)) * 2.0;\n        x = 0.25 * s;\n        y = (rowElement(0, 1) + rowElement(1, 0)) / s;\n        z = (rowElement(0, 2) + rowElement(2, 0)) / s;\n        w = (rowElement(2, 1) - rowElement(1, 2)) / s;\n      } else if (rowElement(1, 1) > rowElement(2, 2)) {\n        s = Math.sqrt(1.0 + rowElement(1, 1) - rowElement(0, 0) - rowElement(2, 2)) * 2.0;\n        x = (rowElement(0, 1) + rowElement(1, 0)) / s;\n        y = 0.25 * s;\n        z = (rowElement(1, 2) + rowElement(2, 1)) / s;\n        w = (rowElement(0, 2) - rowElement(2, 0)) / s;\n      } else {\n        s = Math.sqrt(1.0 + rowElement(2, 2) - rowElement(0, 0) - rowElement(1, 1)) * 2.0;\n        x = (rowElement(0, 2) + rowElement(2, 0)) / s;\n        y = (rowElement(1, 2) + rowElement(2, 1)) / s;\n        z = 0.25 * s;\n        w = (rowElement(1, 0) - rowElement(0, 1)) / s;\n      }\n      quaternion = [x, y, z, w];\n      result = new DecomposedMatrix;\n      result.translate = translate;\n      result.scale = scale;\n      result.skew = skew;\n      result.quaternion = quaternion;\n      result.perspective = perspective;\n      result.rotate = rotate;\n      for (typeKey in result) {\n        type = result[typeKey];\n        for (k in type) {\n          v = type[k];\n          if (isNaN(v)) {\n            type[k] = 0;\n          }\n        }\n      }\n      return result;\n    };\n\n    Matrix.prototype.toString = function() {\n      var i, j, str, _i, _j;\n      str = 'matrix3d(';\n      for (i = _i = 0; _i <= 3; i = ++_i) {\n        for (j = _j = 0; _j <= 3; j = ++_j) {\n          str += roundf(this.els[i][j], 10);\n          if (!(i === 3 && j === 3)) {\n            str += ',';\n          }\n        }\n      }\n      str += ')';\n      return str;\n    };\n\n    Matrix.matrixForTransform = cacheFn(function(transform) {\n      var matrixEl, result, style, _ref, _ref1, _ref2;\n      matrixEl = document.createElement('div');\n      matrixEl.style.position = 'absolute';\n      matrixEl.style.visibility = 'hidden';\n      matrixEl.style[propertyWithPrefix(\"transform\")] = transform;\n      document.body.appendChild(matrixEl);\n      style = window.getComputedStyle(matrixEl, null);\n      result = (_ref = (_ref1 = style.transform) != null ? _ref1 : style[propertyWithPrefix(\"transform\")]) != null ? _ref : (_ref2 = dynamics.tests) != null ? _ref2.matrixForTransform(transform) : void 0;\n      document.body.removeChild(matrixEl);\n      return result;\n    });\n\n    Matrix.fromTransform = function(transform) {\n      var digits, elements, i, match, matrixElements, _i;\n      match = transform != null ? transform.match(/matrix3?d?\\(([-0-9,e \\.]*)\\)/) : void 0;\n      if (match) {\n        digits = match[1].split(',');\n        digits = digits.map(parseFloat);\n        if (digits.length === 6) {\n          elements = [digits[0], digits[1], 0, 0, digits[2], digits[3], 0, 0, 0, 0, 1, 0, digits[4], digits[5], 0, 1];\n        } else {\n          elements = digits;\n        }\n      } else {\n        elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n      }\n      matrixElements = [];\n      for (i = _i = 0; _i <= 3; i = ++_i) {\n        matrixElements.push(elements.slice(i * 4, i * 4 + 4));\n      }\n      return new Matrix(matrixElements);\n    };\n\n    return Matrix;\n\n  })();\n\n  prefixFor = cacheFn(function(property) {\n    var k, prefix, prop, propArray, propertyName, _i, _j, _len, _len1, _ref;\n    if (document.body.style[property] !== void 0) {\n      return '';\n    }\n    propArray = property.split('-');\n    propertyName = \"\";\n    for (_i = 0, _len = propArray.length; _i < _len; _i++) {\n      prop = propArray[_i];\n      propertyName += prop.substring(0, 1).toUpperCase() + prop.substring(1);\n    }\n    _ref = [\"Webkit\", \"Moz\", \"ms\"];\n    for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n      prefix = _ref[_j];\n      k = prefix + propertyName;\n      if (document.body.style[k] !== void 0) {\n        return prefix;\n      }\n    }\n    return '';\n  });\n\n  propertyWithPrefix = cacheFn(function(property) {\n    var prefix;\n    prefix = prefixFor(property);\n    if (prefix === 'Moz') {\n      return \"\" + prefix + (property.substring(0, 1).toUpperCase() + property.substring(1));\n    }\n    if (prefix !== '') {\n      return \"-\" + (prefix.toLowerCase()) + \"-\" + (toDashed(property));\n    }\n    return toDashed(property);\n  });\n\n  rAF = typeof window !== \"undefined\" && window !== null ? window.requestAnimationFrame : void 0;\n\n  animations = [];\n\n  animationsTimeouts = [];\n\n  slow = false;\n\n  slowRatio = 1;\n\n  if (typeof window !== \"undefined\" && window !== null) {\n    window.addEventListener('keyup', function(e) {\n      if (e.keyCode === 68 && e.shiftKey && e.ctrlKey) {\n        return dynamics.toggleSlow();\n      }\n    });\n  }\n\n  if (rAF == null) {\n    lastTime = 0;\n    rAF = function(callback) {\n      var currTime, id, timeToCall;\n      currTime = Date.now();\n      timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      id = window.setTimeout(function() {\n        return callback(currTime + timeToCall);\n      }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n\n  runLoopRunning = false;\n\n  runLoopPaused = false;\n\n  startRunLoop = function() {\n    if (!runLoopRunning) {\n      runLoopRunning = true;\n      return rAF(runLoopTick);\n    }\n  };\n\n  runLoopTick = function(t) {\n    var animation, toRemoveAnimations, _i, _len;\n    if (runLoopPaused) {\n      rAF(runLoopTick);\n      return;\n    }\n    toRemoveAnimations = [];\n    for (_i = 0, _len = animations.length; _i < _len; _i++) {\n      animation = animations[_i];\n      if (!animationTick(t, animation)) {\n        toRemoveAnimations.push(animation);\n      }\n    }\n    animations = animations.filter(function(animation) {\n      return toRemoveAnimations.indexOf(animation) === -1;\n    });\n    if (animations.length === 0) {\n      return runLoopRunning = false;\n    } else {\n      return rAF(runLoopTick);\n    }\n  };\n\n  animationTick = function(t, animation) {\n    var key, properties, property, tt, y, _base, _base1, _ref;\n    if (animation.tStart == null) {\n      animation.tStart = t;\n    }\n    tt = (t - animation.tStart) / animation.options.duration;\n    y = animation.curve(tt);\n    properties = {};\n    if (tt >= 1) {\n      if (animation.curve.initialForce) {\n        properties = animation.properties.start;\n      } else {\n        properties = animation.properties.end;\n      }\n    } else {\n      _ref = animation.properties.start;\n      for (key in _ref) {\n        property = _ref[key];\n        properties[key] = interpolate(property, animation.properties.end[key], y);\n      }\n    }\n    applyFrame(animation.el, properties);\n    if (typeof (_base = animation.options).change === \"function\") {\n      _base.change(animation.el);\n    }\n    if (tt >= 1) {\n      if (typeof (_base1 = animation.options).complete === \"function\") {\n        _base1.complete(animation.el);\n      }\n    }\n    return tt < 1;\n  };\n\n  interpolate = function(start, end, y) {\n    if ((start != null) && (start.interpolate != null)) {\n      return start.interpolate(end, y);\n    }\n    return null;\n  };\n\n  startAnimation = function(el, properties, options, timeoutId) {\n    var endProperties, isSVG, k, matrix, startProperties, transforms, v, _base;\n    if (timeoutId != null) {\n      animationsTimeouts = animationsTimeouts.filter(function(timeout) {\n        return timeout.id !== timeoutId;\n      });\n    }\n    dynamics.stop(el, {\n      timeout: false\n    });\n    if (!options.animated) {\n      dynamics.css(el, properties);\n      if (typeof options.complete === \"function\") {\n        options.complete(this);\n      }\n      return;\n    }\n    properties = parseProperties(properties);\n    startProperties = getCurrentProperties(el, Object.keys(properties));\n    endProperties = {};\n    transforms = [];\n    for (k in properties) {\n      v = properties[k];\n      if ((el.style != null) && transformProperties.contains(k)) {\n        transforms.push([k, v]);\n      } else {\n        endProperties[k] = createInterpolable(v);\n        if (endProperties[k] instanceof InterpolableWithUnit && (el.style != null)) {\n          endProperties[k].prefix = '';\n          if ((_base = endProperties[k]).suffix == null) {\n            _base.suffix = unitForProperty(k, 0);\n          }\n        }\n      }\n    }\n    if (transforms.length > 0) {\n      isSVG = isSVGElement(el);\n      if (isSVG) {\n        matrix = new Matrix2D();\n        matrix.applyProperties(transforms);\n      } else {\n        v = (transforms.map(function(transform) {\n          return transformValueForProperty(transform[0], transform[1]);\n        })).join(\" \");\n        matrix = Matrix.fromTransform(Matrix.matrixForTransform(v));\n      }\n      endProperties['transform'] = matrix.decompose();\n      if (isSVG) {\n        startProperties.transform.applyRotateCenter([endProperties.transform.props.rotate[1], endProperties.transform.props.rotate[2]]);\n      }\n    }\n    animations.push({\n      el: el,\n      properties: {\n        start: startProperties,\n        end: endProperties\n      },\n      options: options,\n      curve: options.type.call(options.type, options)\n    });\n    return startRunLoop();\n  };\n\n  timeouts = [];\n\n  timeoutLastId = 0;\n\n  setRealTimeout = function(timeout) {\n    if (!isDocumentVisible()) {\n      return;\n    }\n    return timeout.realTimeoutId = setTimeout(function() {\n      timeout.fn();\n      return cancelTimeout(timeout.id);\n    }, timeout.delay);\n  };\n\n  addTimeout = function(fn, delay) {\n    var timeout;\n    timeoutLastId += 1;\n    timeout = {\n      id: timeoutLastId,\n      tStart: Date.now(),\n      fn: fn,\n      delay: delay,\n      originalDelay: delay\n    };\n    setRealTimeout(timeout);\n    timeouts.push(timeout);\n    return timeoutLastId;\n  };\n\n  cancelTimeout = function(id) {\n    return timeouts = timeouts.filter(function(timeout) {\n      if (timeout.id === id) {\n        clearTimeout(timeout.realTimeoutId);\n      }\n      return timeout.id !== id;\n    });\n  };\n\n  leftDelayForTimeout = function(time, timeout) {\n    var consumedDelay;\n    if (time != null) {\n      consumedDelay = time - timeout.tStart;\n      return timeout.originalDelay - consumedDelay;\n    } else {\n      return timeout.originalDelay;\n    }\n  };\n\n  if (typeof window !== \"undefined\" && window !== null) {\n    window.addEventListener('unload', function() {});\n  }\n\n  timeBeforeVisibilityChange = null;\n\n  observeVisibilityChange(function(visible) {\n    var animation, difference, timeout, _i, _j, _k, _len, _len1, _len2, _results;\n    runLoopPaused = !visible;\n    if (!visible) {\n      timeBeforeVisibilityChange = Date.now();\n      _results = [];\n      for (_i = 0, _len = timeouts.length; _i < _len; _i++) {\n        timeout = timeouts[_i];\n        _results.push(clearTimeout(timeout.realTimeoutId));\n      }\n      return _results;\n    } else {\n      if (runLoopRunning) {\n        difference = Date.now() - timeBeforeVisibilityChange;\n        for (_j = 0, _len1 = animations.length; _j < _len1; _j++) {\n          animation = animations[_j];\n          if (animation.tStart != null) {\n            animation.tStart += difference;\n          }\n        }\n      }\n      for (_k = 0, _len2 = timeouts.length; _k < _len2; _k++) {\n        timeout = timeouts[_k];\n        timeout.delay = leftDelayForTimeout(timeBeforeVisibilityChange, timeout);\n        setRealTimeout(timeout);\n      }\n      return timeBeforeVisibilityChange = null;\n    }\n  });\n\n  dynamics = {};\n\n  dynamics.linear = function() {\n    return function(t) {\n      return t;\n    };\n  };\n\n  dynamics.spring = function(options) {\n    var A1, A2, decal, frequency, friction, s;\n    if (options == null) {\n      options = {};\n    }\n    applyDefaults(options, arguments.callee.defaults);\n    frequency = Math.max(1, options.frequency / 20);\n    friction = Math.pow(20, options.friction / 100);\n    s = options.anticipationSize / 1000;\n    decal = Math.max(0, s);\n    A1 = function(t) {\n      var M, a, b, x0, x1;\n      M = 0.8;\n      x0 = s / (1 - s);\n      x1 = 0;\n      b = (x0 - (M * x1)) / (x0 - x1);\n      a = (M - b) / x0;\n      return (a * t * options.anticipationStrength / 100) + b;\n    };\n    A2 = function(t) {\n      return Math.pow(friction / 10, -t) * (1 - t);\n    };\n    return function(t) {\n      var A, At, a, angle, b, frictionT, y0, yS;\n      frictionT = (t / (1 - s)) - (s / (1 - s));\n      if (t < s) {\n        yS = (s / (1 - s)) - (s / (1 - s));\n        y0 = (0 / (1 - s)) - (s / (1 - s));\n        b = Math.acos(1 / A1(yS));\n        a = (Math.acos(1 / A1(y0)) - b) / (frequency * (-s));\n        A = A1;\n      } else {\n        A = A2;\n        b = 0;\n        a = 1;\n      }\n      At = A(frictionT);\n      angle = frequency * (t - s) * a + b;\n      return 1 - (At * Math.cos(angle));\n    };\n  };\n\n  dynamics.bounce = function(options) {\n    var A, fn, frequency, friction;\n    if (options == null) {\n      options = {};\n    }\n    applyDefaults(options, arguments.callee.defaults);\n    frequency = Math.max(1, options.frequency / 20);\n    friction = Math.pow(20, options.friction / 100);\n    A = function(t) {\n      return Math.pow(friction / 10, -t) * (1 - t);\n    };\n    fn = function(t) {\n      var At, a, angle, b;\n      b = -3.14 / 2;\n      a = 1;\n      At = A(t);\n      angle = frequency * t * a + b;\n      return At * Math.cos(angle);\n    };\n    fn.initialForce = true;\n    return fn;\n  };\n\n  dynamics.gravity = function(options) {\n    var L, bounciness, curves, elasticity, fn, getPointInCurve, gravity;\n    if (options == null) {\n      options = {};\n    }\n    applyDefaults(options, arguments.callee.defaults);\n    bounciness = Math.min(options.bounciness / 1250, 0.8);\n    elasticity = options.elasticity / 1000;\n    gravity = 100;\n    curves = [];\n    L = (function() {\n      var b, curve;\n      b = Math.sqrt(2 / gravity);\n      curve = {\n        a: -b,\n        b: b,\n        H: 1\n      };\n      if (options.initialForce) {\n        curve.a = 0;\n        curve.b = curve.b * 2;\n      }\n      while (curve.H > 0.001) {\n        L = curve.b - curve.a;\n        curve = {\n          a: curve.b,\n          b: curve.b + L * bounciness,\n          H: curve.H * bounciness * bounciness\n        };\n      }\n      return curve.b;\n    })();\n    getPointInCurve = function(a, b, H, t) {\n      var c, t2;\n      L = b - a;\n      t2 = (2 / L) * t - 1 - (a * 2 / L);\n      c = t2 * t2 * H - H + 1;\n      if (options.initialForce) {\n        c = 1 - c;\n      }\n      return c;\n    };\n    (function() {\n      var L2, b, curve, _results;\n      b = Math.sqrt(2 / (gravity * L * L));\n      curve = {\n        a: -b,\n        b: b,\n        H: 1\n      };\n      if (options.initialForce) {\n        curve.a = 0;\n        curve.b = curve.b * 2;\n      }\n      curves.push(curve);\n      L2 = L;\n      _results = [];\n      while (curve.b < 1 && curve.H > 0.001) {\n        L2 = curve.b - curve.a;\n        curve = {\n          a: curve.b,\n          b: curve.b + L2 * bounciness,\n          H: curve.H * elasticity\n        };\n        _results.push(curves.push(curve));\n      }\n      return _results;\n    })();\n    fn = function(t) {\n      var curve, i, v;\n      i = 0;\n      curve = curves[i];\n      while (!(t >= curve.a && t <= curve.b)) {\n        i += 1;\n        curve = curves[i];\n        if (!curve) {\n          break;\n        }\n      }\n      if (!curve) {\n        v = options.initialForce ? 0 : 1;\n      } else {\n        v = getPointInCurve(curve.a, curve.b, curve.H, t);\n      }\n      return v;\n    };\n    fn.initialForce = options.initialForce;\n    return fn;\n  };\n\n  dynamics.forceWithGravity = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    applyDefaults(options, arguments.callee.defaults);\n    options.initialForce = true;\n    return dynamics.gravity(options);\n  };\n\n  dynamics.bezier = (function() {\n    var Bezier, Bezier_, yForX;\n    Bezier_ = function(t, p0, p1, p2, p3) {\n      return (Math.pow(1 - t, 3) * p0) + (3 * Math.pow(1 - t, 2) * t * p1) + (3 * (1 - t) * Math.pow(t, 2) * p2) + Math.pow(t, 3) * p3;\n    };\n    Bezier = function(t, p0, p1, p2, p3) {\n      return {\n        x: Bezier_(t, p0.x, p1.x, p2.x, p3.x),\n        y: Bezier_(t, p0.y, p1.y, p2.y, p3.y)\n      };\n    };\n    yForX = function(xTarget, Bs, returnsToSelf) {\n      var B, aB, i, lower, percent, upper, x, xTolerance, _i, _len;\n      B = null;\n      for (_i = 0, _len = Bs.length; _i < _len; _i++) {\n        aB = Bs[_i];\n        if (xTarget >= aB(0).x && xTarget <= aB(1).x) {\n          B = aB;\n        }\n        if (B !== null) {\n          break;\n        }\n      }\n      if (!B) {\n        if (returnsToSelf) {\n          return 0;\n        } else {\n          return 1;\n        }\n      }\n      xTolerance = 0.0001;\n      lower = 0;\n      upper = 1;\n      percent = (upper + lower) / 2;\n      x = B(percent).x;\n      i = 0;\n      while (Math.abs(xTarget - x) > xTolerance && i < 100) {\n        if (xTarget > x) {\n          lower = percent;\n        } else {\n          upper = percent;\n        }\n        percent = (upper + lower) / 2;\n        x = B(percent).x;\n        i += 1;\n      }\n      return B(percent).y;\n    };\n    return function(options) {\n      var Bs, points, returnsToSelf;\n      if (options == null) {\n        options = {};\n      }\n      points = options.points;\n      returnsToSelf = false;\n      Bs = (function() {\n        var i, k, _fn;\n        Bs = [];\n        _fn = function(pointA, pointB) {\n          var B2;\n          B2 = function(t) {\n            return Bezier(t, pointA, pointA.cp[pointA.cp.length - 1], pointB.cp[0], pointB);\n          };\n          return Bs.push(B2);\n        };\n        for (i in points) {\n          k = parseInt(i);\n          if (k >= points.length - 1) {\n            break;\n          }\n          _fn(points[k], points[k + 1]);\n        }\n        return Bs;\n      })();\n      return function(t) {\n        if (t === 0) {\n          return 0;\n        } else if (t === 1) {\n          return 1;\n        } else {\n          return yForX(t, Bs, returnsToSelf);\n        }\n      };\n    };\n  })();\n\n  dynamics.easeInOut = function(options) {\n    var friction, _ref;\n    if (options == null) {\n      options = {};\n    }\n    friction = (_ref = options.friction) != null ? _ref : arguments.callee.defaults.friction;\n    return dynamics.bezier({\n      points: [\n        {\n          x: 0,\n          y: 0,\n          cp: [\n            {\n              x: 0.92 - (friction / 1000),\n              y: 0\n            }\n          ]\n        }, {\n          x: 1,\n          y: 1,\n          cp: [\n            {\n              x: 0.08 + (friction / 1000),\n              y: 1\n            }\n          ]\n        }\n      ]\n    });\n  };\n\n  dynamics.easeIn = function(options) {\n    var friction, _ref;\n    if (options == null) {\n      options = {};\n    }\n    friction = (_ref = options.friction) != null ? _ref : arguments.callee.defaults.friction;\n    return dynamics.bezier({\n      points: [\n        {\n          x: 0,\n          y: 0,\n          cp: [\n            {\n              x: 0.92 - (friction / 1000),\n              y: 0\n            }\n          ]\n        }, {\n          x: 1,\n          y: 1,\n          cp: [\n            {\n              x: 1,\n              y: 1\n            }\n          ]\n        }\n      ]\n    });\n  };\n\n  dynamics.easeOut = function(options) {\n    var friction, _ref;\n    if (options == null) {\n      options = {};\n    }\n    friction = (_ref = options.friction) != null ? _ref : arguments.callee.defaults.friction;\n    return dynamics.bezier({\n      points: [\n        {\n          x: 0,\n          y: 0,\n          cp: [\n            {\n              x: 0,\n              y: 0\n            }\n          ]\n        }, {\n          x: 1,\n          y: 1,\n          cp: [\n            {\n              x: 0.08 + (friction / 1000),\n              y: 1\n            }\n          ]\n        }\n      ]\n    });\n  };\n\n  dynamics.spring.defaults = {\n    frequency: 300,\n    friction: 200,\n    anticipationSize: 0,\n    anticipationStrength: 0\n  };\n\n  dynamics.bounce.defaults = {\n    frequency: 300,\n    friction: 200\n  };\n\n  dynamics.forceWithGravity.defaults = dynamics.gravity.defaults = {\n    bounciness: 400,\n    elasticity: 200\n  };\n\n  dynamics.easeInOut.defaults = dynamics.easeIn.defaults = dynamics.easeOut.defaults = {\n    friction: 500\n  };\n\n  dynamics.css = makeArrayFn(function(el, properties) {\n    return applyProperties(el, properties, true);\n  });\n\n  dynamics.animate = makeArrayFn(function(el, properties, options) {\n    var id;\n    if (options == null) {\n      options = {};\n    }\n    options = clone(options);\n    applyDefaults(options, {\n      type: dynamics.easeInOut,\n      duration: 1000,\n      delay: 0,\n      animated: true\n    });\n    options.duration = Math.max(0, options.duration * slowRatio);\n    options.delay = Math.max(0, options.delay);\n    if (options.delay === 0) {\n      return startAnimation(el, properties, options);\n    } else {\n      id = dynamics.setTimeout(function() {\n        return startAnimation(el, properties, options, id);\n      }, options.delay);\n      return animationsTimeouts.push({\n        id: id,\n        el: el\n      });\n    }\n  });\n\n  dynamics.stop = makeArrayFn(function(el, options) {\n    if (options == null) {\n      options = {};\n    }\n    if (options.timeout == null) {\n      options.timeout = true;\n    }\n    if (options.timeout) {\n      animationsTimeouts = animationsTimeouts.filter(function(timeout) {\n        if (timeout.el === el && ((options.filter == null) || options.filter(timeout))) {\n          dynamics.clearTimeout(timeout.id);\n          return false;\n        }\n        return true;\n      });\n    }\n    return animations = animations.filter(function(animation) {\n      return animation.el !== el;\n    });\n  });\n\n  dynamics.setTimeout = function(fn, delay) {\n    return addTimeout(fn, delay * slowRatio);\n  };\n\n  dynamics.clearTimeout = function(id) {\n    return cancelTimeout(id);\n  };\n\n  dynamics.toggleSlow = function() {\n    slow = !slow;\n    if (slow) {\n      slowRatio = 3;\n    } else {\n      slowRatio = 1;\n    }\n    return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(\"dynamics.js: slow animations \" + (slow ? \"enabled\" : \"disabled\")) : void 0 : void 0;\n  };\n\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\n    module.exports = dynamics;\n  } else if (typeof define === \"function\") {\n    define('dynamics', function() {\n      return dynamics;\n    });\n  } else {\n    window.dynamics = dynamics;\n  }\n\n}).call(this);\n"],"sourceRoot":"/source/"}